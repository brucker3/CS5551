{% extends 'base.html' %}
{% load static %}
{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Checkers Board</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
          <a class="nav-link" href={%url 'home'%}>Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={%url 'rules'%}>rules</a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href={%url 'player_stats'%}>player states</a>
      </li>

      <li class="nav-item" style="right:130px; position:absolute">
        <span class="nav-link">Welcome, {{request.user}}</span>
      </li>

      <li class="nav-item" style="right:20px; position:absolute">
        <a class="nav-link" href={%url 'logout'%}>logout</a>
      </li>


    </ul>
  </div>
</nav>

	<button id="create-game" type="button" >CREATE GAME</button><br><br>
	
	<form action="/game/joinGame/" method="post" style="border-style: ridge;">
		{% csrf_token %}
	  <div id="games-list-radio"></div>
	  <button id="join-game" type="submit" value="submit" >JOIN GAME</button><br>
	</form>


	{{ all_active_game_data|json_script:"all-games-data" }}
    <script>		
		let game_data_dict = JSON.parse(document.getElementById('all-games-data').textContent);
        console.log(game_data_dict);
		
		var result = document.getElementById('games-list-radio');
		for (var i in game_data_dict) {
			result.innerHTML += ('<label><input type="radio" name="game-id" value="' + i + '" checked/> ' + i+'  by user:  '+game_data_dict[i] + '</label><br>');
		  } 
		
		document.querySelector('#create-game').onclick = function(e) {
            window.location.pathname = '/game/createGame/';
        };
    </script>

{% endblock %}
